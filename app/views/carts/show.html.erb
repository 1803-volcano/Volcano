<div class="container">
	<div class="row">
		<%= render partial: "top/sidebar" %>
		<div class="col-xs-10">
			<h1>カート詳細</h1>
			<hr>

			<!--submitボタンでselectに行くように指定-->
			<form action= "1/select" >

			<div class="col-xs-8">
				<table class="table table-striped">
					<thead>
						<tr>
							<td></td>
							<td>商品</td>
							<td>数量</td>
							<td>小計</td>
						</tr>
					</thead>
					<tbody>
						<% total_price = 0 %><!--商品の価格を合計するため-->
						<% @cart_items.each do |item| %>
						<% product = Product.find(item.product_id) %><!--productをidから探し出す-->
						<tr>
							<td><%= attachment_image_tag product, :picture, width: "100", height: "100", format: "jpeg", fallback: "img/no_image.jpg" , style:"width:100px; height:100px;" %></td>
							<td>
								タイトル：<%= product.cd_title %><br>
								アーティスト：<%= product.artist %><br>
								価格：￥<%= product.price %>
							</td>
							<td>
								<!--selectに個数を送る-->
								<input type="number" min=1 value=1 style="width: 50px;" name="quantity[]"><br>
								<button class="btn btn-danger" id="cart-item-destroy"><%= link_to "カートから削除", cart_cart_items_path(id: item.id, product_id: item.product_id, cart_id: @cart.id), method: :delete %></button>
							</td>
							<td><h4>￥<%= number_with_delimiter(product.price) %></h4></td>
							<% total_price += product.price %>
						</tr>

						<% end %>
					</tbody>
				</table>
			</div>
			<div class="col-xs-3 col-xs-offset-1 panel panel-info text-center">
				<h2 class="">合計 ￥<%= number_with_delimiter(total_price) %></h2>
				<input type="submit" value="レジへ進む" class="btn btn-primary">
			</div>

		</form>

		</div>
	</div>
</div>


<style type="text/css">
		<!--
		button a{color: #fff; font-size: 16px;}
		#cart-item-destroy {margin-top: 8px;}
		-->
</style>